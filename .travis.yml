language: r
r: bioc-devel
cache: packages
sudo: false       # use container based build system
warnings_are_errors: true
dist: trusty

addons:
  apt:
    packages:
      - libnetcdf-dev
      - netcdf-bin # libnetcdf-dev doesn't contain nc-config in ubuntu 12.04 (in 16.04 [xerus] it is part of libnetcdf-dev)
      - libhdf5-dev

before_install:
    - mkdir -p ~/.R
    - echo -e 'MAKEFLAGS = -j2' > ~/.R/Makevars
    - echo 'options(Ncpus = 2)' > ~/.Rprofile

r_check_args: --no-build-vignettes --no-vignettes

# In general the r-travis script automatically dump the logs after failure but
# because of a bug in travis the output is often truncated. See
# https://github.com/travis-ci/travis-ci/issues/6018
after_failure: sleep 10
